$(document).ready(function(){var a=document.getElementById("app-canvas"),c=HA_CircleCutter.collectParams(document);HA_CircleCutter.draw(a,c)});var OnGenGCode=function(){var a=HA_CircleCutter.collectParams(document),a=HA_CircleCutter.genGCode(a);HA_Utils.exportToFile(a,"partGCode.nc")};HA_Utils={exportToFile:function(a,c){var b=encodeURI("data:text/csv;charset=utf-8,"+a),e=document.createElement("a");e.setAttribute("href",b);e.setAttribute("download",c);e.click()}};
HA_CircleCutter={collectParams:function(a){var c=3*25.4,b={};b.holeDiam=25.4*a.getElementById("holeDiam").valueAsNumber;b.bitDiam=25.4*a.getElementById("bitDiam").valueAsNumber;b.xpos=25.4*a.getElementById("xpos").valueAsNumber+c;b.ypos=25.4*a.getElementById("ypos").valueAsNumber+50.8;b.depth=25.4*a.getElementById("depth").valueAsNumber;a.getElementById("depthPerPass")&&(b.depthPerPass=25.4*a.getElementById("depthPerPass").valueAsNumber);b.epsilon=1E-4;return b},draw:function(a,c){var b=a.getContext("2d");
b.save();b.fillStyle="black";b.beginPath();b.arc(c.xpos,c.ypos,c.holeDiam,0,2*Math.PI,!0);b.fill();b.restore()},genGCode:function(a){var c=a.depth,b=a.depthPerPass,e=a.holeDiam/2,f=a.xpos-a.holeDiam,g=a.ypos;a=a.epsilon;if(b<a)return"Error - depth per pass too small";if(e<a)return"Error - hole diameter too small";a="(ToDo, add information about what, how, when, and who made this file)\n\nG17 (set XY Plane)\n";a+="G20 (inches)\n";a+="G40 (Tool Radius Compensation: off)\n";a+="G49 (Tool Length Offset Compensation: off)\n";
a+="G54 (Work Coordinate System)\n";a+="G80 (Cancel Canned Cycle)\n";a+="G90 (Absolute programming)\n";a+="G94 (Feedrate per minute)\n";a+="G0 Z1.0(seek to z = 1)\n";a+="F120.0 (Feedrate - in inches per minute)\n";a+="G00 X"+f+" Y"+g+" Z1.0\n";for(var d=c>b?-b:-c;d>=-c;){a+="G01 X"+f+" Y"+g+" Z"+d+"\n";a+="G02 X"+f+" Y"+g+" I"+e+" J0\n";if(d<=-c)break;d-=b;d<-c&&(d=-c)}return a+="G00 X"+f+" Y"+g+" Z1.0\n"}};
